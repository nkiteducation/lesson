# README — Contact API

Кратко: это минимальный HTTP API для хранения телефонных контактов в оперативной памяти с использованием FastAPI.

## Требования

* Python 3.8+
* Библиотеки: `fastapi`, `uvicorn`

## Создание и активация виртуального окружения

1. Перейди в папку проекта:

```bash
cd путь/к/твоему/проекту
```

2. Создай виртуальное окружение `.venv`:

```bash
python -m venv .venv
```

3. Активируй виртуальное окружение

```bash
source .venv/bin/activate
```

4. Установи зависимости:

```bash
pip install fastapi uvicorn
```

## Как запускать

Файл содержит блок:

```py
if __name__ == "__main__":
    uvicorn.run(app)
```

Запуск из командной строки (если файл называется `app.py`):

```bash
python app.py
# или
uvicorn app:app --reload
```

После запуска доступна интерактивная документация по адресу `http://127.0.0.1:8000/docs`.

---

## Структура данных

* `contact_list` — простой словарь Python: ключ — имя (str), значение — номер (int).

  * Хранение в памяти: данные теряются при перезапуске процесса.
  * Не подходит для параллельного/продуктивного использования (нет синхронизации, нет постоянного хранилища).

## Компоненты кода

### Импорты

* `uvicorn` — запускает сервер ASGI.
* `FastAPI` — объект приложения, регистрирует маршруты.
* `HTTPException`, `status` — формирование ошибок и статус-кодов.
* `RedirectResponse` — ответ, выполняющий перенаправление.

### `app = FastAPI()`

Создаёт объект приложения — основа для регистрации HTTP-эндпоинтов.

### Эндпоинты

Все функции помечены декораторами `@app.<method>("<path>")`.

1. `@app.get("/contact")` — `get_all()`

   * Метод: GET
   * Путь: `/contact`
   * Поведение: возвращает весь `contact_list` как JSON (словарь).
   * Код ответа: 200 (по умолчанию).

2. `@app.get("/contact/{name}")` — `get(name: str)`

   * Метод: GET
   * Путь: `/contact/{name}` — `name` берётся из URL (path parameter).
   * Поведение: возвращает значение по ключу из словаря или `None`, если контакта нет.

3. `@app.post("/contact", status_code=status.HTTP_201_CREATED)` — `add(name: str, number: int)`

   * Метод: POST
   * Путь: `/contact`
   * Параметры функции `name` и `number` — query-параметры.
   * Поведение: добавляет контакт в словарь (перезаписывает существующий, если имя совпадает).
   * Код ответа при успешном добавлении: 201.

4. `@app.delete("/contact/{name}")` — `delete(name: str)`

   * Метод: DELETE
   * Путь: `/contact/{name}`
   * Поведение: удаляет контакт и возвращает номер.

5. `@app.get("/")` — `root()`

   * Метод: GET
   * Путь: `/`
   * Поведение: перенаправляет на `/docs`.

---

## Примеры запросов (curl)

1. Получить всех:

```bash
curl http://127.0.0.1:8000/contact
```

2. Получить по имени:

```bash
curl http://127.0.0.1:8000/contact/nazar
```

3. Добавить контакт:

```bash
curl -X POST "http://127.0.0.1:8000/contact?name=ivan&number=380501234567"
```

4. Удалить контакт:

```bash
curl -X DELETE http://127.0.0.1:8000/contact/ivan
```

---